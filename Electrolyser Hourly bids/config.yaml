# config.yaml

# Simulation parameters
simulation:
  start_date: '2024-12-01'
  end_date: '2024-12-31'
  planning_horizon: 5
  implementation_period: 1
  market_input_file: 'scaled_data_NL4.xlsx'
  output_dir: './electrolyzer_results_cvar_0.95_0.05_December' # output directory where results are saved
  random_seed: 42

# Electrolyzer Plant General Parameters
electrolyzer_plant:
  opportunity_cost_mwh_shortfall: 158.0 # used only if shortfall penalty is enabled in the thesis it was not used.
  target_hydrogen_per_day: 19000 # kg, 80% of the max target and can produce more if profitable
  target_avg_h2_per_day_in_window: 19000 # kg
  baseload_mw: 0.0 # additional baseload can be added this is not considered during optimisation these are just added at the end


# Objective Function, Risk, and Hydrogen Price
objective_tuning:
  enable_production_shortfall_penalty: false # Opportunity cost for not meeting hydrogen production target (per kg)
  h2_opportunity_cost_per_kg: 8.0 # Example value, adjust as needed this was not used during thesis

hydrogen_price:
  mode: constant # Can be 'constant' or 'dynamic' (dynamic not yet implemented)
  value_eur_per_kg: 8.0 # The sale price of hydrogen, enabling profit maximisation

risk_management:
  cvar_alpha: 0.95 # confidence level for CVaR
  cvar_weight: 0.05 # weight for CVaR in the objective

# Time-of-Use (TOU) Peak Demand Charge Tariff
time_of_use_tariff:
  enabled: true # Set to true to activate the TOU incentive in the objective
  rate_eur_per_kw_month: 7.38 # ACM tariff rate for high voltage customers

# Forecast parameters
forecast:
  model_type: 'prophet'
  training_days: 90
  model_path: './models/'
  retrain: true
  target_variable: 'Price'
  feature_sets: ['hour', 'day_of_week', 'month', 'price_lags', 'price_stats', 'load', 'solar_wind']
  prophet:
    changepoint_prior_scale: 0.05
    seasonality_prior_scale: 10.0
    holidays_prior_scale: 10.0
    daily_seasonality: true
    weekly_seasonality: true
    yearly_seasonality: 'auto'
    seasonality_mode: 'multiplicative'
    interval_width: 0.95
    mcmc_samples: 0
    country_code: 'NL'
    floor: -500.0
    cap: 4000.0 
  cv:
    enabled: true
    initial: '30 days'
    period: '7 days'
    horizon: '7 days'
    parallel: 'processes'
  feature_selection:
    enabled: true
    max_features: 10
    correlation_threshold: 0.85
  outlier_handling:
    enabled: true
    method: 'clip'
    threshold: 3

# Scenario generation parameters
scenario_generation:
  num_scenarios: 500
  num_reduced: 10
  distribution: 'levy_stable'
  base_scale_factor: 0.076
  uncertainty_growth_rate: 0.5
  alpha: 1.31
  beta: 0.16
  correlation: true
  
  # Parameters to control unrealistic price jumps
  scenario_realism:
    enable_jump_control: true
    max_hourly_jump_eur: 300.0
    jump_smoothing_factor: 0.5

# Bidding strategy parameters number of price tiers allowed to be formed. But this is also restricted by the number of scenarios we are considering
# as prices comes from the scenarios
bid_strategy:
  max_blocks_per_hour: 25
  min_bid_qty_mw: 0.0

# Solver options
solver:
  name: 'gurobi'
  threads: 0
  options:
    TimeLimit: 1200

#redispatch tolerance
redispatch:
  trigger_tolerance_percent: 0.0
  unused_energy_penalty_factor: 1e7

# SYNTHETIC DATA you can make your own synthetic prices for simulations here is backtesting is not needed 
synthetic_data:
  enabled: false       # Set to true to bypass the ML forecaster

  # Baseline, Seasonality, and Trend
  mu: 65.0            # Long-run mean price (€/MWh)
  A: 30.0             # Amplitude of the daily sine wave (€/MWh)
  beta: 0.0           # Linear trend in price (€/MWh per hour)

  # Noise and Autocorrelation
  sigma: 40.0         # Standard deviation of high-frequency noise
  phi: 0.75           # Autocorrelation factor (0=no memory, 0.8=strong memory)

  # Price Spikes
  p_pos: 0.02         # Probability of a positive (high) price spike
  S_pos: 300.0        # Average size of the positive spike
  p_neg: 0.01         # Probability of a negative price spike
  S_neg: 100.0        # Average depth of the negative spike

  # Forecast Accuracy
  sigma_f: 15.0       # **Controls forecast accuracy**. Higher value = less accurate forecast.

  # Reproducibility
  seed: 42
